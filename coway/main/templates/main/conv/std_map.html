{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/conv/conv_map.css' %}">

<section id="title">
    <div class="back_icon"> <a href="{% url 'convpage' %}"><i class="fas fa-chevron-left"></i></a></div>
    <div class="title_name">스터디존</div>
</section>

<section id="map">
    <img src="{% static 'images/임시.png' %}" alt="지도">
</section>

<section id="main_img">
    <div id="map" style="width:318px;height:237px;"></div>
		<script type="text/javascript"src="//dapi.kakao.com/v2/maps/sdk.js?appkey=33ccb9ed924f4f71c3407b8f585df918"></script>
		<script>
			var container = document.getElementById('map');
			var options = {
				center: new kakao.maps.LatLng(37.5582, 127.0006),
				level: 3
			};

			var map = new kakao.maps.Map(container, options);

            if (navigator.geolocation) {
    
            navigator.geolocation.getCurrentPosition(function(position) {

            var lat = position.coords.latitude, 
                lon = position.coords.longitude; 

            var locPosition = new kakao.maps.LatLng(lat, lon)
                displayMarker(locPosition, message);

            });

        } else { 
    
            var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
                message = 'geolocation 사용X'
        
            displayMarker(locPosition, message);
        }
        function displayMarker(locPosition, message) {

            var marker = new kakao.maps.Marker({  
                map: map, 
                position: locPosition
            });     
        }    

            var positions = [
                {
                    title: '학림관 ispace', //학림관 1층
                    latlng: new kakao.maps.LatLng(37.5583, 126.9996)
                },
                {
                    title: '학생회관 ispace', //학생회관 1층
                    latlng: new kakao.maps.LatLng(37.5583, 126.9996)
                },
                {
                    title: '명진관 명진라운지', 
                    latlng: new kakao.maps.LatLng(37.5583, 126.9996)
                },
                {
                    title: '중앙도서관', 
                    latlng: new kakao.maps.LatLng(37.55700, 127.0027)
                },
                {
                    title: '법학관 열람실', 
                    latlng: new kakao.maps.LatLng(37.5584, 126.99825)
                },
                {
                    title: '비즈마루', //경영대 1층
                    latlng: new kakao.maps.LatLng(37.5589, 126.9999)
                },
                {
                    title: '아리수북카페',
                    latlng: new kakao.maps.LatLng(37.55700, 127.0027)
                }
            ];

            var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 
    
            for (var i = 0; i < positions.length; i ++) {
    
                var imageSize = new kakao.maps.Size(24, 35); 
    
                var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
                var marker = new kakao.maps.Marker({
                    map: map, 
                    position: positions[i].latlng, 
                    title : positions[i].title,
                    image : markerImage 
                });
            }

		</script>

{% endblock %}

