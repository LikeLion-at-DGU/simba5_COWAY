{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/conv/conv_map.css' %}">

<section id="title">
    <div class="back_icon"> <a href="{% url 'convpage' %}"><i class="fas fa-chevron-left"></i></a></div>
    <div class="title_name">식당</div>
</section>

<section id="map">
    <img src="{% static 'images/임시.png' %}" alt="지도">
</section>

<section id="main_img">
    <div id="map" style="width:318px;height:237px;"></div>
		<script type="text/javascript"src="//dapi.kakao.com/v2/maps/sdk.js?appkey=33ccb9ed924f4f71c3407b8f585df918"></script>
		<script>
			var container = document.getElementById('map');
			var options = {
				center: new kakao.maps.LatLng(37.5582, 127.0006),
				level: 3
			};

			var map = new kakao.maps.Map(container, options);

            if (navigator.geolocation) {
    
    navigator.geolocation.getCurrentPosition(function(position) {

    var lat = position.coords.latitude, 
        lon = position.coords.longitude; 

    var locPosition = new kakao.maps.LatLng(lat, lon)
        displayMarker(locPosition, message);

});
} else { 
    
    var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
        message = 'geolocation 사용X'

    displayMarker(locPosition, message);
}
function displayMarker(locPosition, message) {

    var marker = new kakao.maps.Marker({  
        map: map, 
        position: locPosition
    });     
}  

            var positions = [
                {
                    title: '상록원', 
                    latlng: new kakao.maps.LatLng(37.55709, 126.99976)
                },
                {
                    title: '가든쿡식당', 
                    latlng: new kakao.maps.LatLng(37.55789, 127.0032)
                },
                {
                    title: '기숙사식당', 
                    latlng: new kakao.maps.LatLng(37.5584,126.9981)
                }
            ];

            var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 
    
            for (var i = 0; i < positions.length; i ++) {
    
                var imageSize = new kakao.maps.Size(24, 35); 
    
                var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
                var marker = new kakao.maps.Marker({
                    map: map,
                    position: positions[i].latlng, 
                    title : positions[i].title, 
                    image : markerImage 
                });
            }

		</script>


{% endblock %}

